{% extends 'base.html' %}
{% load static %}
{% block content %}
<style>
    body {
        font-family: '넥슨 고딕';
    }

    .header {
        width:100%;
        height:250px;
        background-color: #58C9B9;
        padding:20px;
        text-align: center;
        color: white;
    }

    
    .header > .mypoint {
        margin-top: 30px;
    }

    .header > .mypoint > .value {
        font-family: '넥슨 고딕 bold';
        font-size:48px;
    }

    .bottom {
        background-color: #41958A;
        border: none;
        border-radius: 10px;
        font-size:14px;
        color: white;
        padding:10px;
    }

    .body {
        padding: 20px;
    }

    .payment {
        border: 2px solid rgb(238, 238, 238);
        padding: 15px;
        margin: 20px 0px;
    }

    .btn {
        border-radius: 20px;
        background-color: #33978a;
        border:none;
    }

    .btn:focus {
        background-color: #1d685e;
    }
    .btn:hover {
        background-color: #1d685e;
        
    }    
    
    .left-text {
        text-align: left;
    }

    .right-text {
        text-align: right;
        position: relative;
    }

    #pay_amount {
        position: absolute;
        right: 20px;
        top:50%;
        transform:translate(0, -50%);
        font-size:18px;
        font-family: '넥슨 고딕 bold';
    }

    .minus > .row > .right-text {
        
        color:#E06273;
    }

    .plus > .row > .right-text {
        
        color:#5FBE83;
    }

    #pay_name {
        font-size:18px;
        color:#163F76;
    }
    
    #pay_date {
        margin-top:3px;
        font-size:12px;
    }
</style>

<div class="header">
    <div class="btn-group buttons" role="group" aria-label="Basic example">
        <button type="button" class="btn btn-primary shadow-none">포인트</button>
        <button type="button" class="btn btn-primary shadow-none">주차권</button>
        <button type="button" class="btn btn-primary shadow-none">내주차장</button>
      </div>
    <div class="mypoint">
        <text class="title">내 포인트</text><br>
        <text class="value" id="mypoint"></text>
    </div>
    
    <button class="bottom" onclick="goToPay()">충 전 하 기</button>
</div>

<div class="body">
    <div class="payment-list">
        
    </div>
</div>

<div id="payment_plus"  class="payment plus container" style="display:none">
    <div class="row" id="row">
        <div class="col-8 left-text" >
            <b><text id="pay_name"></text></b><br>
            <text id="pay_date"></text>
        </div>
        <div class="col-4 right-text" id="">
            <b><text id="pay_amount"></text></b></div>
    </div>
</div>

<div id="payment_minus" class="payment minus container" style="display:none">
    <div class="row" id="row">
        <div class="col-7 left-text" >
            <b><text id="pay_name"></text></b><br>
            <text id="pay_date"></text>
        </div>
        <div class="col-5 right-text" id="">
            <b><text id="pay_amount"></text></b></div>
    </div>
</div>
<script>
    $('#mypoint').text("{{ user.point }}" + "P");
    "{% for payment in payments %}"
        var pay_name = "{{ payment.name }}";
        var date = "{{ payment.created }}";
        var amount = "{{ payment.amount }}";

        if(pay_name.indexOf("포인트 결제") != "-1") {
            payment_div = $("#payment_plus").clone();
            payment_div.attr("id", pay_name);
            payment_div.find("#pay_name").text(pay_name);
            payment_div.find("#pay_date").text(date);
            payment_div.find("#pay_amount").text("+" + amount);
            payment_div.css("display", "block")
        }

        $('.payment-list').prepend(payment_div);
    "{% endfor %}"

    function goToPay() {
        location.href="{% url 'pay:main' %}";
    }
</script>
{% endblock %}